<script>
  // --- Preset labels (optioneel, handig voor debug/uitbreiding) ---
  const presetLabels = {
    "1080_standard":"1080p â€“ Standaard instellingen",
    "1080_high":"1080p â€“ Hoge instellingen",
    "1440_high":"1440p â€“ Hoge instellingen",
    "max_futureproof":"Max prestaties / Future-proof"
  };

  // --- Game weights: moeten exact matchen met checkbox "value" tekst ---
  // 1 = licht, 3 = gemiddeld, 5 = extreem zwaar
  const gameWeights = {
    "Roblox": 1,
    "Minecraft / Terraria": 2,
    "League of Legends / DOTA": 2,
    "Rocket League": 2,

    "Fortnite": 3,
    "Valorant / CS2": 3,
    "GTA V / FiveM (Roleplay)": 3,
    "Apex Legends": 3,

    "Call of Duty / Warzone": 4,
    "Red Dead Redemption 2": 4,
    "Hogwarts Legacy": 5,
    "Cyberpunk 2077": 5
  };

  // ==========================================================
  // âœ… PRODUCTEN (3 PCâ€™s)
  // Nu hoef je later alleen link/prijs aan te passen.
  // ==========================================================
  const products = {
    ignite: {
      name: "ðŸ”¥The IgniteðŸ”¥",
      price: "â‚¬650,-", // <-- PAS AAN
      link: "https://replay-pc.eu/goedkope-gaming-pc-rtx-3060-ti", // <-- PAS AAN (of laat staan)
      fps1080p: [
        "Roblox / Minecraft: 200+ FPS",
        "League of Legends / Rocket League: 180+ FPS",
        "Fortnite (Performance Mode): 160â€“240 FPS",
        "Fortnite (High Settings): 120â€“160 FPS",
        "GTA V (High): 120â€“140 FPS",
        "Apex Legends: 110â€“140 FPS",
        "Call of Duty / Warzone: 95â€“115 FPS",
        "Red Dead Redemption 2 (High): 80â€“100 FPS",
        "Hogwarts Legacy (High): 75â€“95 FPS",
        "Cyberpunk 2077 (High, zonder ray tracing): 70â€“90 FPS"
      ]
    },

    medium: {
      name: "âš¡The Mediumâš¡",
      price: "â‚¬â€”", // <-- VUL LATER IN
      link: "https://replay-pc.eu/PLAK-HIER-LINK", // <-- VUL LATER IN
      fps1080p: [
        "Roblox / Minecraft: 200+ FPS",
        "League of Legends / Rocket League: 200+ FPS",
        "Fortnite (Performance Mode): 200+ FPS",
        "Fortnite (High Settings): 140â€“180 FPS",
        "GTA V (High): 140â€“170 FPS",
        "Apex Legends: 130â€“170 FPS",
        "Call of Duty / Warzone: 110â€“140 FPS",
        "Red Dead Redemption 2 (High): 95â€“120 FPS",
        "Hogwarts Legacy (High): 85â€“110 FPS",
        "Cyberpunk 2077 (High, zonder ray tracing): 80â€“105 FPS"
      ]
    },

    highend: {
      name: "ðŸ‘‘High-EndðŸ‘‘",
      price: "â‚¬â€”", // <-- VUL LATER IN
      link: "https://replay-pc.eu/PLAK-HIER-LINK", // <-- VUL LATER IN
      fps1080p: [
        "Roblox / Minecraft: 240+ FPS",
        "League of Legends / Rocket League: 240+ FPS",
        "Fortnite (Performance Mode): 240+ FPS",
        "Fortnite (High Settings): 170â€“220 FPS",
        "GTA V (High): 170â€“220 FPS",
        "Apex Legends: 160â€“220 FPS",
        "Call of Duty / Warzone: 140â€“190 FPS",
        "Red Dead Redemption 2 (High): 120â€“160 FPS",
        "Hogwarts Legacy (High): 110â€“150 FPS",
        "Cyberpunk 2077 (High, zonder ray tracing): 105â€“150 FPS"
      ]
    }
  };

  // --- Helpers ---
  function getCheckedGames() {
    return Array.from(document.querySelectorAll('#gameList input[type="checkbox"]'))
      .filter(i => i.checked)
      .map(i => i.value);
  }

  function getMaxWeight(games){
    let max = 0;
    for (const g of games){
      max = Math.max(max, gameWeights[g] || 0);
    }
    return max;
  }

  // ==========================================================
  // âœ… LOGICA: zwaarste game + preset => product tier
  //
  // Basis op maxWeight:
  //  - 1â€“2  => ignite
  //  - 3â€“4  => medium
  //  - 5    => highend
  //
  // Preset upgrades:
  //  - 1080_high: upgrade als maxWeight >=3
  //  - 1440_high: minimaal medium, en bij >=4 highend
  //  - max_futureproof: altijd 1 tier omhoog (min medium)
  // ==========================================================
  function chooseProduct(selectedGames, preset){
    const maxWeight = getMaxWeight(selectedGames);

    // 1) basis tier
    let tier = "ignite";
    if (maxWeight <= 2) tier = "ignite";
    else if (maxWeight <= 4) tier = "medium";
    else tier = "highend"; // maxWeight 5

    // 2) preset upgrades
    if (preset === "1080_high") {
      if (tier === "ignite" && maxWeight >= 3) tier = "medium";
    }

    if (preset === "1440_high") {
      if (tier === "ignite") tier = "medium";
      if (tier === "medium" && maxWeight >= 4) tier = "highend";
    }

    if (preset === "max_futureproof") {
      if (tier === "ignite") tier = "medium";
      else if (tier === "medium") tier = "highend";
    }

    return products[tier];
  }

  function renderProduct(product){
    // Naam / prijs / link
    document.getElementById("pcName").textContent = product.name;
    document.getElementById("pcPrice").textContent = product.price;

    const pcLink = document.getElementById("pcLink");
    pcLink.href = product.link;
    pcLink.textContent = `Bekijk ${product.name}`;

    // FPS lijst
    const fpsUl = document.getElementById("pcFps");
    fpsUl.innerHTML = "";
    product.fps1080p.forEach(line => {
      const li = document.createElement("li");
      li.textContent = line;
      fpsUl.appendChild(li);
    });

    // Show/Hide
    document.getElementById("emptyState").style.display = "none";
    document.getElementById("result").style.display = "block";
  }

  // --- Events ---
  document.getElementById("calcBtn").addEventListener("click", () => {
    const games = getCheckedGames();
    const preset = document.getElementById("preset").value;

    if (games.length === 0) {
      alert("Selecteer minimaal 1 game om een advies te krijgen.");
      return;
    }

    // debug klaar voor later (niet noodzakelijk)
    const presetText = presetLabels[preset] || preset;
    void(presetText);

    const product = chooseProduct(games, preset);
    renderProduct(product);
  });

  document.getElementById("resetBtn").addEventListener("click", () => {
    document.querySelectorAll('#gameList input[type="checkbox"]').forEach(i => i.checked = false);
    document.getElementById("preset").value = "1080_standard";
    document.getElementById("result").style.display = "none";
    document.getElementById("emptyState").style.display = "block";
  });

  // ==========================================================
  // ðŸ”¥ Later 2e/3e PC live zetten:
  // 1) Vervang alleen:
  //    - products.medium.link + products.medium.price
  //    - products.highend.link + products.highend.price
  // 2) Klaar. Logica werkt al.
  // ==========================================================
</script>

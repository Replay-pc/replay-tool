<script>
document.addEventListener("DOMContentLoaded", () => {
  // --- Game weights: moeten exact matchen met checkbox "value" tekst ---
  const gameWeights = {
    "Roblox": 1,
    "Minecraft / Terraria": 2,
    "League of Legends / DOTA": 2,
    "Rocket League": 2,

    "Fortnite": 3,
    "Valorant / CS2": 3,
    "GTA V / FiveM (Roleplay)": 3,
    "Apex Legends": 3,

    "Call of Duty / Warzone": 4,
    "Red Dead Redemption 2": 4,
    "Hogwarts Legacy": 5,
    "Cyberpunk 2077": 5
  };

  // âœ… PRODUCTEN (3 PCâ€™s) â€” game-gedreven, altijd 1080p
  const products = {
    ignite: {
      name: "ðŸ”¥The IgniteðŸ”¥",
      price: "â‚¬650,-",
      link: "https://replay-pc.eu/goedkope-gaming-pc-rtx-3060-ti",
      fps1080p: [
        "Roblox / Minecraft: 200+ FPS",
        "League of Legends / Rocket League: 180+ FPS",
        "Fortnite (Performance Mode): 160â€“240 FPS",
        "Fortnite (High Settings): 120â€“160 FPS",
        "GTA V (High): 120â€“140 FPS",
        "Apex Legends: 110â€“140 FPS",
        "Call of Duty / Warzone: 95â€“115 FPS",
        "Red Dead Redemption 2 (High): 80â€“100 FPS",
        "Hogwarts Legacy (High): 75â€“95 FPS",
        "Cyberpunk 2077 (High, zonder ray tracing): 70â€“90 FPS"
      ]
    },
    medium: {
      name: "âš¡The Mediumâš¡",
      price: "â‚¬â€”",
      link: "https://replay-pc.eu/PLAK-HIER-LINK",
      fps1080p: [
        "Roblox / Minecraft: 200+ FPS",
        "League of Legends / Rocket League: 200+ FPS",
        "Fortnite (Performance Mode): 200+ FPS",
        "Fortnite (High Settings): 140â€“180 FPS",
        "GTA V (High): 140â€“170 FPS",
        "Apex Legends: 130â€“170 FPS",
        "Call of Duty / Warzone: 110â€“140 FPS",
        "Red Dead Redemption 2 (High): 95â€“120 FPS",
        "Hogwarts Legacy (High): 85â€“110 FPS",
        "Cyberpunk 2077 (High, zonder ray tracing): 80â€“105 FPS"
      ]
    },
    highend: {
      name: "ðŸ‘‘High-EndðŸ‘‘",
      price: "â‚¬â€”",
      link: "https://replay-pc.eu/PLAK-HIER-LINK",
      fps1080p: [
        "Roblox / Minecraft: 240+ FPS",
        "League of Legends / Rocket League: 240+ FPS",
        "Fortnite (Performance Mode): 240+ FPS",
        "Fortnite (High Settings): 170â€“220 FPS",
        "GTA V (High): 170â€“220 FPS",
        "Apex Legends: 160â€“220 FPS",
        "Call of Duty / Warzone: 140â€“190 FPS",
        "Red Dead Redemption 2 (High): 120â€“160 FPS",
        "Hogwarts Legacy (High): 110â€“150 FPS",
        "Cyberpunk 2077 (High, zonder ray tracing): 105â€“150 FPS"
      ]
    }
  };

  // --- DOM refs (crash-proof) ---
  const calcBtn = document.getElementById("calcBtn");
  const resetBtn = document.getElementById("resetBtn");
  const pcName = document.getElementById("pcName");
  const pcPrice = document.getElementById("pcPrice");
  const pcLink = document.getElementById("pcLink");
  const pcFps = document.getElementById("pcFps");
  const emptyState = document.getElementById("emptyState");
  const result = document.getElementById("result");
  const gameList = document.getElementById("gameList");

  // Als Ã©Ã©n van de noodzakelijke elementen ontbreekt: stop netjes (geen white page)
  const required = [calcBtn, resetBtn, pcName, pcPrice, pcLink, pcFps, emptyState, result, gameList];
  if (required.some(el => !el)) {
    console.warn("Replay tool: een of meerdere elementen missen (check ids).");
    return;
  }

  function getCheckedGames() {
    return Array.from(document.querySelectorAll('#gameList input[type="checkbox"]'))
      .filter(i => i.checked)
      .map(i => i.value);
  }

  function getMaxWeight(games){
    let max = 0;
    for (const g of games){
      max = Math.max(max, gameWeights[g] || 0);
    }
    return max;
  }

  // âœ… LOGICA: alleen game-gedreven
  function chooseProduct(selectedGames){
    const maxWeight = getMaxWeight(selectedGames);
    if (maxWeight <= 2) return products.ignite;
    if (maxWeight <= 4) return products.medium;
    return products.highend;
  }

  function renderProduct(product){
    pcName.textContent = product.name;
    pcPrice.textContent = product.price;

    pcLink.href = product.link;
    pcLink.textContent = `Bekijk ${product.name}`;

    pcFps.innerHTML = "";
    product.fps1080p.forEach(line => {
      const li = document.createElement("li");
      li.textContent = line;
      pcFps.appendChild(li);
    });

    emptyState.style.display = "none";
    result.style.display = "block";
  }

  calcBtn.addEventListener("click", () => {
    const games = getCheckedGames();
    if (games.length === 0) {
      alert("Selecteer minimaal 1 game om een advies te krijgen.");
      return;
    }
    renderProduct(chooseProduct(games));
  });

  resetBtn.addEventListener("click", () => {
    document.querySelectorAll('#gameList input[type="checkbox"]').forEach(i => i.checked = false);
    result.style.display = "none";
    emptyState.style.display = "block";
  });
});
</script>

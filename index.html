<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Replay PC Tool</title>

<style>
.rpc-wrap{max-width:1100px;margin:0 auto;padding:18px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
.rpc-sub{opacity:.9;margin-top:6px}
.rpc-grid{display:grid;grid-template-columns:1.1fr .9fr;gap:16px;margin-top:14px}
.rpc-card{border:1px solid rgba(0,0,0,.12);border-radius:14px;padding:16px;background:#0f1115;color:#e9eef5;box-shadow:0 10px 30px rgba(0,0,0,.25)}
.rpc-card h3{margin:0 0 10px 0}
.rpc-help{margin:0 0 12px 0;opacity:.85;font-size:14px}

.rpc-checklist{display:grid;grid-template-columns:1fr 1fr;gap:8px 14px}
.rpc-section-title{margin:10px 0 8px 0;font-weight:800;grid-column:1/-1;}
.rpc-check{display:flex;gap:10px;align-items:center;font-size:14px}
.rpc-check input{transform:scale(1.1)}

.rpc-fps-pick{display:grid;gap:8px;margin-top:10px}
.rpc-radio{display:flex;gap:10px;align-items:center;font-size:14px}

.rpc-divider{height:1px;background:rgba(255,255,255,.12);margin:14px 0}

.rpc-result{margin-top:10px;padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:#121826}
.rpc-badge{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,59,59,.18);color:#ff8b8b;font-weight:900;font-size:12px;margin-bottom:10px}
.rpc-title{margin:6px 0;font-size:20px}
.rpc-price{font-size:22px;font-weight:900;margin-bottom:12px;color:#ff3b3b;}
.rpc-h5{margin:14px 0 8px 0;font-size:14px}
.rpc-specs{margin:8px 0 0 18px;line-height:1.5}
.rpc-actions{margin-top:14px}
.rpc-link{display:block;text-align:center;padding:12px;border-radius:12px;background:#2b3344;color:#fff;text-decoration:none;font-weight:900}
.rpc-why{margin-top:10px;padding:12px;border-radius:12px;background:rgba(255,255,255,.05);font-size:13px;line-height:1.45}
.rpc-tip{margin-top:16px;font-size:13px;opacity:.9}
.rpc-tip a{color:#ff8b8b;font-weight:700}

.rpc-empty{padding:14px;border-radius:12px;border:1px dashed rgba(255,255,255,.18);background:rgba(255,255,255,.02)}
.rpc-empty b{color:#fff}

/* ‚úÖ Fade animation */
.rpc-fade{transition:opacity 220ms ease, transform 220ms ease;}
.rpc-fade.is-out{opacity:0;transform:translateY(6px);pointer-events:none;}
.rpc-fade.is-in{opacity:1;transform:translateY(0);}

/* ‚úÖ Pro bullets */
.rpc-bullets{margin:0;padding-left:18px}
.rpc-bullets li{margin:6px 0}

/* ‚úÖ Match-score bar */
.rpc-score{margin-top:10px;padding:12px;border-radius:12px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.10)}
.rpc-score-top{display:flex;justify-content:space-between;align-items:center;font-weight:900;font-size:13px;margin-bottom:8px}
.rpc-score-bar{height:10px;border-radius:999px;background:rgba(255,255,255,.10);overflow:hidden}
.rpc-score-fill{height:100%;width:0;border-radius:999px;transition:width 300ms ease, background-color 300ms ease}
.rpc-score-sub{margin-top:8px;font-size:12.5px;opacity:.9}

/* ‚úÖ Nuance note */
.rpc-note{margin-top:10px;opacity:.92;font-size:12.5px;line-height:1.45}

/* ‚úÖ Share block */
.rpc-share{margin-top:14px;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.03)}
.rpc-share-title{font-weight:900;font-size:13px;margin-bottom:8px;opacity:.95}
.rpc-share-row{display:flex;gap:10px;align-items:center}
.rpc-share-input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.14);background:#0e1420;color:#e9eef5;font-size:12.5px}
.rpc-share-btn{padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:#2b3344;color:#fff;font-weight:900;cursor:pointer}
.rpc-share-btn:hover{filter:brightness(.95)}
.rpc-share-msg{margin-top:8px;font-size:12px;opacity:.9;display:none}

@media (max-width:900px){
  .rpc-grid{grid-template-columns:1fr}
  .rpc-checklist{grid-template-columns:1fr}
  .rpc-share-row{flex-direction:column}
  .rpc-share-btn{width:100%}
}
</style>
</head>

<body>
<div class="rpc-wrap">
  <h2>Welke Game PC Past Bij Jou?</h2>
  <p class="rpc-sub">Vink minimaal 2 games aan en kies je minimale FPS. Advies verschijnt automatisch.</p>

  <div class="rpc-grid">

    <!-- LEFT -->
    <div class="rpc-card">
      <h3>1) Welke games wil je spelen?</h3>
      <p class="rpc-help">Kies <b>minimaal 2</b> games. We baseren het advies op de zwaarste games in jouw selectie.</p>

      <div class="rpc-checklist" id="gameList">
        <div class="rpc-section-title">Licht (instap)</div>
        <label class="rpc-check"><input type="checkbox" value="Roblox"> Roblox</label>
        <label class="rpc-check"><input type="checkbox" value="Minecraft"> Minecraft</label>
        <label class="rpc-check"><input type="checkbox" value="League of Legends"> League of Legends</label>
        <label class="rpc-check"><input type="checkbox" value="Rocket League"> Rocket League</label>

        <div class="rpc-section-title">Gemiddeld (populair)</div>
        <label class="rpc-check"><input type="checkbox" value="Fortnite"> Fortnite</label>
        <label class="rpc-check"><input type="checkbox" value="Valorant"> Valorant</label>
        <label class="rpc-check"><input type="checkbox" value="GTA V"> GTA V / FiveM</label>
        <label class="rpc-check"><input type="checkbox" value="Apex Legends"> Apex Legends</label>

        <div class="rpc-section-title">Zwaar / extreem zwaar</div>
        <label class="rpc-check"><input type="checkbox" value="Call of Duty / Warzone"> Call of Duty / Warzone</label>
        <label class="rpc-check"><input type="checkbox" value="Red Dead Redemption 2"> Red Dead Redemption 2</label>
        <label class="rpc-check"><input type="checkbox" value="Hogwarts Legacy"> Hogwarts Legacy</label>
        <label class="rpc-check"><input type="checkbox" value="Cyberpunk 2077"> Cyberpunk 2077</label>
      </div>

      <div class="rpc-divider"></div>

      <h3>2) Minimale FPS</h3>
      <div class="rpc-fps-pick" id="fpsPick">
        <label class="rpc-radio"><input type="radio" name="minFps" value="60" checked> 60+ FPS</label>
        <label class="rpc-radio"><input type="radio" name="minFps" value="100"> 100+ FPS</label>
        <label class="rpc-radio"><input type="radio" name="minFps" value="144"> 144+ FPS</label>
      </div>

      <h3 style="margin-top:18px;">3) Wat is belangrijker?</h3>
      <p class="rpc-help">Dit be√Ønvloedt hoe streng we adviseren bij dezelfde games.</p>
      <div class="rpc-fps-pick" id="stylePick">
        <label class="rpc-radio"><input type="radio" name="playStyle" value="competitive" checked> Competitief (hoge FPS, lagere settings)</label>
        <label class="rpc-radio"><input type="radio" name="playStyle" value="graphics"> Mooie graphics (hogere settings)</label>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="rpc-card">
      <h3>Jouw advies</h3>

      <div class="rpc-result rpc-fade is-in" id="result" style="display:none;">
        <div class="rpc-badge">Aanbevolen systeem</div>

        <h4 class="rpc-title" id="pcName"></h4>
        <div class="rpc-price" id="pcPrice"></div>

        <!-- ‚úÖ Match score -->
        <div class="rpc-score" aria-label="Match score">
          <div class="rpc-score-top">
            <div>Match-score</div>
            <div id="scoreText">‚Äî/100</div>
          </div>
          <div class="rpc-score-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div class="rpc-score-fill" id="scoreFill"></div>
          </div>
          <div class="rpc-score-sub" id="scoreSub">‚Äî</div>
        </div>

        <!-- ‚úÖ Waarom -->
        <div class="rpc-why">
          <ul class="rpc-bullets" id="whyBullets"></ul>
          <div class="rpc-note" id="nuanceNote" style="display:none;"></div>
        </div>

        <h5 class="rpc-h5">üéØ Verwachte prestaties (1080p)</h5>
        <ul class="rpc-specs" id="pcFps"></ul>

        <div class="rpc-actions">
          <a id="pcLink" class="rpc-link" href="#" target="_blank" rel="noopener">Bekijk deze PC</a>
        </div>

        <!-- ‚úÖ Share / Save -->
        <div class="rpc-share">
          <div class="rpc-share-title">Opslaan / delen</div>
          <div class="rpc-share-row">
            <input class="rpc-share-input" id="shareLink" type="text" readonly value="" />
            <button class="rpc-share-btn" id="copyBtn" type="button">Kopieer link</button>
          </div>
          <div class="rpc-share-msg" id="copyMsg">‚úÖ Link gekopieerd!</div>
        </div>

        <p class="rpc-tip">
          üí° Twijfel je? Gebruik ons
          <a href="https://replay-pc.eu/contactformulier" target="_blank" rel="noopener">contactformulier</a>
          voor een persoonlijk advies op maat.
        </p>
      </div>

      <div class="rpc-empty" id="emptyState">
        Selecteer <b>minimaal 2 games</b> en kies je minimale FPS om advies te krijgen.
      </div>

    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{

  // ==============================
  //  CONFIG / DATA
  // ==============================

  // 1 = licht, 2 = gemiddeld, 3 = zwaar, 4 = extreem zwaar
  // (Deze verdeling voorkomt te snelle upsell: Apex/GTA/Fortnite blijven ‚Äúgemiddeld‚Äù.)
  const gameWeights = {
    // Licht
    "Roblox": 1,
    "Minecraft": 1,
    "League of Legends": 1,
    "Rocket League": 1,

    // Gemiddeld
    "Fortnite": 2,
    "Valorant": 2,
    "GTA V": 2,
    "Apex Legends": 2,

    // Zwaar
    "Call of Duty / Warzone": 3,
    "Red Dead Redemption 2": 3,

    // Extreem zwaar
    "Hogwarts Legacy": 4,
    "Cyberpunk 2077": 4
  };

  // Products (later: vul link/prijs aan)
  const products = {
    budget: {
      key: "budget",
      name: "üí∏ Budget 60FPS",
      price: "‚Ç¨‚Äî",
      link: "#",
      fps: [
        "Esports games (LoL/Valorant/RL): 120‚Äì200 FPS",
        "Fortnite / Apex: 80‚Äì130 FPS (settings afhankelijk)",
        "Warzone: 60‚Äì90 FPS (settings afhankelijk)",
        "RDR2: 55‚Äì75 FPS (mix settings)"
      ]
    },
    ignite: {
      key: "ignite",
      name: "üî•The Igniteüî•",
      price: "‚Ç¨650,-",
      link: "https://replay-pc.eu/goedkope-gaming-pc-rtx-3060-ti",
      fps: [
        "Roblox / Minecraft: 200+ FPS",
        "League of Legends / Rocket League: 180+ FPS",
        "Fortnite (High Settings): 120‚Äì160 FPS",
        "GTA V (High): 120‚Äì140 FPS",
        "Apex Legends: 110‚Äì140 FPS",
        "Call of Duty / Warzone: 95‚Äì115 FPS",
        "Red Dead Redemption 2 (High): 80‚Äì100 FPS",
        "Hogwarts Legacy (High): 75‚Äì95 FPS",
        "Cyberpunk 2077 (High, zonder ray tracing): 70‚Äì90 FPS"
      ]
    },
    highend: {
      key: "highend",
      name: "üëë High-End",
      price: "‚Ç¨‚Äî",
      link: "#",
      fps: [
        "Esports (LoL/Valorant/RL): 240+ FPS",
        "Fortnite / Apex: 160‚Äì240 FPS",
        "Warzone: 140‚Äì190 FPS",
        "RDR2: 120‚Äì160 FPS",
        "Cyberpunk: 105‚Äì150 FPS"
      ]
    }
  };

  // Thresholds in "effective need" (maxWeight + modifiers)
  // Houd ze eenvoudig + logisch:
  // - budget is vooral voor licht/gemiddeld bij 60fps en competitive
  // - ignite is ‚Äúdefault safe‚Äù
  // - highend voor 144fps of graphics+zwaar
  const T_BUDGET = 2.4;  // <= budget
  const T_HIGH   = 3.6;  // <= ignite, daarboven highend

  function fpsModifier(fps){
    if (fps >= 144) return 1.0;
    if (fps >= 100) return 0.45;
    return 0.0; // 60
  }
  function styleModifier(style){
    // graphics is zwaarder (hogere settings)
    return style === "graphics" ? 0.55 : 0.0;
  }

  // ==============================
  //  DOM refs
  // ==============================
  const resultBox   = document.getElementById("result");
  const emptyState  = document.getElementById("emptyState");
  const pcNameEl    = document.getElementById("pcName");
  const pcPriceEl   = document.getElementById("pcPrice");
  const pcLinkEl    = document.getElementById("pcLink");
  const pcFpsUl     = document.getElementById("pcFps");
  const whyBullets  = document.getElementById("whyBullets");
  const nuanceNote  = document.getElementById("nuanceNote");

  // score UI
  const scoreText   = document.getElementById("scoreText");
  const scoreFill   = document.getElementById("scoreFill");
  const scoreSub    = document.getElementById("scoreSub");

  // share UI
  const shareLinkEl = document.getElementById("shareLink");
  const copyBtn     = document.getElementById("copyBtn");
  const copyMsg     = document.getElementById("copyMsg");

  // Safety
  const ok = [resultBox, emptyState, pcNameEl, pcPriceEl, pcLinkEl, pcFpsUl, whyBullets, nuanceNote, scoreText, scoreFill, scoreSub, shareLinkEl, copyBtn, copyMsg].every(Boolean);
  if (!ok){
    console.warn("Replay tool: element mist. Check ids.");
    return;
  }

  // ==============================
  //  Helpers
  // ==============================
  function getCheckedGames(){
    return [...document.querySelectorAll('#gameList input:checked')].map(i=>i.value);
  }
  function getMinFps(){
    return parseInt(document.querySelector('input[name="minFps"]:checked').value, 10);
  }
  function getPlayStyle(){
    return document.querySelector('input[name="playStyle"]:checked').value;
  }
  function getMaxWeight(games){
    let max=0;
    games.forEach(g=>max=Math.max(max, gameWeights[g] || 0));
    return max;
  }
  function getTwoHeaviestGames(games){
    const ranked = games
      .map((g, idx) => ({ g, w: gameWeights[g] || 0, idx }))
      .sort((a,b) => (b.w - a.w) || (a.idx - b.idx))
      .map(x => x.g);

    const unique = [];
    for (const g of ranked){
      if (!unique.includes(g)) unique.push(g);
      if (unique.length === 2) break;
    }
    return unique;
  }
  function categoryLabel(maxW){
    if (maxW <= 1) return "Licht";
    if (maxW === 2) return "Gemiddeld";
    if (maxW === 3) return "Zwaar";
    return "Extreem zwaar";
  }

  // ==============================
  //  Decision Logic (what we recommend)
  // ==============================
  function chooseProduct(games, fps, style){
    const maxW = getMaxWeight(games);
    const eff  = maxW + styleModifier(style) + fpsModifier(fps);

    // Tier from effective "need"
    if (eff <= T_BUDGET) return products.budget;
    if (eff <= T_HIGH) return products.ignite;
    return products.highend;
  }

  // ==============================
  //  Match-score (requirement-based) + color
  //  - If chosen product meets need tier => high score
  //  - If chosen product is above need => still high but slightly less (overkill)
  //  - If chosen product is below => low (should basically not happen)
  // ==============================
  function getTierFromEffective(eff){
    if (eff <= T_BUDGET) return "budget";
    if (eff <= T_HIGH)   return "ignite";
    return "highend";
  }
  function tierRank(t){
    return t === "budget" ? 1 : t === "ignite" ? 2 : 3;
  }

  function computeMatchScore(product, games, fps, style){
    const maxW = getMaxWeight(games);
    const eff  = maxW + styleModifier(style) + fpsModifier(fps);

    const needTier = getTierFromEffective(eff);
    const gotTier  = product.key;

    const needR = tierRank(needTier);
    const gotR  = tierRank(gotTier);

    const headroom = gotR - needR; // 0 = perfect

    let score = 96; // default perfect

    if (headroom === 1) score = 92;
    if (headroom >= 2)  score = 88;

    if (headroom < 0){
      // too low recommendation
      score = 55 + headroom * 20;
    }

    // Nuance: graphics + high fps + very heavy games => slight reduction (not huge)
    const isVeryHeavy = maxW >= 4;
    const isStrict = (style === "graphics" && fps >= 100);
    if (isVeryHeavy && isStrict) score -= 6;

    // Extra nuance: if user wants 144 but games are light, recommending highend is "overkill"
    // This only triggers if product is highend and need is much lower (already handled by headroom),
    // but we add a small adjustment for realism.
    if (product.key === "highend" && maxW <= 2 && fps >= 144) score -= 4;

    score = Math.max(5, Math.min(99, Math.round(score)));

    let label = "Goede match";
    if (score >= 95) label = "Perfecte match";
    else if (score >= 88) label = "Sterke match";
    else if (score >= 75) label = "Goede match";
    else if (score >= 60) label = "Redelijke match";
    else label = "Twijfelzone";

    let color = "#ff3b3b"; // red
    if (score >= 88) color = "#2fe68f"; // green
    else if (score >= 70) color = "#ffc13b"; // amber

    return { score, label, color, eff, needTier, gotTier };
  }

  function renderScore(scoreObj){
    const { score, label, color } = scoreObj;
    scoreText.textContent = `${score}/100`;
    scoreSub.textContent  = label;

    scoreFill.style.width = `${score}%`;
    scoreFill.style.backgroundColor = color;

    const bar = scoreFill.parentElement;
    if (bar) bar.setAttribute("aria-valuenow", String(score));
  }

  // ==============================
  //  Fade swap
  // ==============================
  function fadeSwap(updateFn){
    if (resultBox.style.display === "none"){
      updateFn();
      resultBox.classList.remove("is-out");
      resultBox.classList.add("is-in");
      return;
    }

    resultBox.classList.remove("is-in");
    resultBox.classList.add("is-out");

    setTimeout(() => {
      updateFn();
      requestAnimationFrame(() => {
        resultBox.classList.remove("is-out");
        resultBox.classList.add("is-in");
      });
    }, 220);
  }

  // ==============================
  //  Share link
  // ==============================
  function buildShareUrl(games, fps, style){
    const url = new URL(window.location.href);
    url.searchParams.set("fps", String(fps));
    url.searchParams.set("style", style);
    // store values; keep short
    url.searchParams.set("games", games.map(g => encodeURIComponent(g)).join(","));
    return url.toString();
  }

  function applyShareFromUrl(){
    const url = new URL(window.location.href);
    const fps = url.searchParams.get("fps");
    const style = url.searchParams.get("style");
    const gamesParam = url.searchParams.get("games");

    if (fps){
      const fpsRadio = document.querySelector(`input[name="minFps"][value="${fps}"]`);
      if (fpsRadio) fpsRadio.checked = true;
    }
    if (style){
      const stRadio = document.querySelector(`input[name="playStyle"][value="${style}"]`);
      if (stRadio) stRadio.checked = true;
    }
    if (gamesParam){
      const decoded = gamesParam.split(",").map(s => decodeURIComponent(s));
      const set = new Set(decoded);
      document.querySelectorAll('#gameList input[type="checkbox"]').forEach(cb => {
        cb.checked = set.has(cb.value);
      });
    }
  }

  copyBtn.addEventListener("click", async () => {
    try{
      await navigator.clipboard.writeText(shareLinkEl.value || window.location.href);
      copyMsg.style.display = "block";
      setTimeout(() => copyMsg.style.display = "none", 1200);
    } catch (e){
      // fallback
      shareLinkEl.focus();
      shareLinkEl.select();
      document.execCommand("copy");
      copyMsg.style.display = "block";
      setTimeout(() => copyMsg.style.display = "none", 1200);
    }
  });

  // ==============================
  //  Render
  // ==============================
  function render(product, games, fps, style){
    const maxW = getMaxWeight(games);
    const cat  = categoryLabel(maxW);
    const top2 = getTwoHeaviestGames(games);
    const g1 = top2[0] || "‚Äî";
    const g2 = top2[1] || "‚Äî";

    // header
    pcNameEl.textContent  = product.name;
    pcPriceEl.textContent = product.price;
    pcLinkEl.href         = product.link;
    pcLinkEl.textContent  = `Bekijk ${product.name}`;

    // match score
    const scoreObj = computeMatchScore(product, games, fps, style);
    renderScore(scoreObj);

    // bullets
    whyBullets.innerHTML = "";
    const bullets = [
      `Zwaarste games in jouw selectie: ‚Äú${g1}‚Äù en ‚Äú${g2}‚Äù.`,
      `Jouw doel: ${fps}+ FPS op 1080p.`,
      `Speelstijl: ${style === "competitive" ? "Competitief (hoge FPS, lagere settings)" : "Mooie graphics (hogere settings)"}.`
    ];
    bullets.forEach(t=>{
      const li=document.createElement("li");
      li.textContent=t;
      whyBullets.appendChild(li);
    });

    // nuance note (alleen wanneer relevant)
    nuanceNote.style.display = "none";
    nuanceNote.textContent = "";

    // Professional nuance triggers
    if (product.key === "budget" && maxW >= 2){
      nuanceNote.textContent = `Tip: dit is een budgetadvies voor 60+ FPS. In Fortnite/Apex kan de FPS per map/setting verschillen. Wil je stabieler, kies Ignite of vraag ons om advies op maat. (Categorie: ${cat})`;
      nuanceNote.style.display = "block";
    } else if (product.key === "ignite" && maxW >= 4 && style === "graphics" && fps >= 100){
      nuanceNote.textContent = `Tip: bij zware singleplayer games kan 100+ FPS op hoge settings lastig zijn. Wil je echt ‚Äòaltijd‚Äô 100+ FPS, kies liever High-End of vraag ons om advies op maat. (Categorie: ${cat})`;
      nuanceNote.style.display = "block";
    } else {
      // show category as small pro detail
      nuanceNote.textContent = `Categorie van je zwaarste game: ${cat}.`;
      nuanceNote.style.display = "block";
    }

    // fps list
    pcFpsUl.innerHTML = "";
    product.fps.forEach(line=>{
      const li=document.createElement("li");
      li.textContent=line;
      pcFpsUl.appendChild(li);
    });

    // share link
    shareLinkEl.value = buildShareUrl(games, fps, style);

    // show
    emptyState.style.display="none";
    resultBox.style.display="block";
  }

  function hideResultWithMessage(msg){
    emptyState.innerHTML = msg;
    resultBox.style.display="none";
    emptyState.style.display="block";
  }

  function update(){
    const games = getCheckedGames();
    const fps   = getMinFps();
    const style = getPlayStyle();

    if (games.length === 0) {
      hideResultWithMessage('Selecteer <b>minimaal 2 games</b> en kies je minimale FPS om advies te krijgen.');
      return;
    }
    if (games.length === 1) {
      hideResultWithMessage('Selecteer nog <b>1 extra game</b> (minimaal 2) om een betrouwbaar advies te geven.');
      return;
    }

    const chosen = chooseProduct(games, fps, style);

    fadeSwap(() => {
      render(chosen, games, fps, style);
    });
  }

  // Apply share params (if any), then update
  applyShareFromUrl();

  document.getElementById("gameList").addEventListener("change", update);
  document.getElementById("fpsPick").addEventListener("change", update);
  document.getElementById("stylePick").addEventListener("change", update);

  update(); // init

});
</script>
</body>
</html>
